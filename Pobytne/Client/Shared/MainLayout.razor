@inherits LayoutComponentBase
@inject AuthenticationService service

<div class="page">
    <AuthorizeView>
        <Authorized>
            <div class="sidebar  w-auto" style="background-color:#061726">
                <NavMenu OnLogout="Logout" />
            </div>
        </Authorized>
    </AuthorizeView>

    <main>
        <AuthorizeView >
            <NotAuthorized>
                <Pobytne.Client.Pages.Login />
            </NotAuthorized>
            <Authorized>

                <TokenExpirationCounter/>
                <CascadingValue Value="moduleWorkplace">
                    <article class="content px-4">
                        @Body 
                    </article>
                </CascadingValue>

            </Authorized>
        </AuthorizeView>
    </main>
</div>

@code {
    [CascadingParameter]
    private Task<AuthenticationState> authenticationState { get; set; } = default!;

    private ModuleWorkplace moduleWorkplace { get; set; } = new ModuleWorkplace();

    private async Task Logout()
    {
        await service.Logout();
    }
}